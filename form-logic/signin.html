<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
          integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="../css/main.css">
    <script src="register.js"></script>
</head>
<body>
<div class="container">
    <form>
        <!-- Email input -->
        <div class="text-center">
            <h1 style="color: #b60305">Sign In</h1>
        </div>
        <div class="form-outline mb-4">
            <label class="form-label" for="inputEmail"></label>
            <input type="email" oninput="singIn()" placeholder="Email address" id="inputEmail" class="form-control"/>
        </div>

        <!-- Password input -->
        <div class="form-outline mb-4 position-relative">
            <label class="form-label" for="inputPassword"></label>
            <input type="password" oninput="singIn()" placeholder="Password" id="inputPassword" class="form-control"/>
            <span class="show-btn position-absolute" onclick="togglePass(this)"><i
                    class="fa-solid fa-eye-slash"></i></span>
        </div>
        <div class="text-center text-danger" id="fail"></div>

        <!-- 2 column grid layout for inline styling -->
        <div class="row mb-4">
            <div class="col d-flex justify-content-center">
                <!-- Checkbox -->
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="remember" value="1" id="form2Example31" checked/>
                    <label class="form-check-label" for="form2Example31"> Remember me </label>
                </div>
            </div>

            <div class="col">
                <!-- Simple link -->
                <a href="#!">Forgot password?</a>
            </div>
        </div>

        <!-- Submit button -->
        <div class="text-center">
            <button type="button" onclick="singInNow()" class="btn btn-primary btn-block mb-4">Sign In</button>
        </div>


        <!-- Register buttons -->
        <div class="text-center">
            <p>Not a member? <a href="signup.html">Sign Up</a></p>
        </div>
    </form>
</div>
<script>
    let arr = JSON.parse(localStorage.getItem('ListUser'))
    console.log(arr)
    let check = false;

    function singIn() {
        let email = document.querySelector("#inputEmail").value;
        let password = document.querySelector("#inputPassword").value;
        if (email.trim() == '' || password.trim() == '') {
            document.querySelector("#fail").innerHTML = "Tài Khoản Và Mật Khẩu Không được bỏ trống !";
        } else {
            document.querySelector('#fail').innerHTML = '';
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].email == email && arr[i].password == password) {
                    localStorage.setItem('user', JSON.stringify(arr[i]));
                    check = true;
                    break;
                }
            }

        }
    }
    function singInNow(){
        if(check){
            location.href = 'index.html'
        }else {
            document.querySelector('#fail').innerHTML = 'Thông Tin Tài Khoản Hoặc Mật Không Chính Xác! ';
        }
    }
    function togglePass(e) {
        console.log(e.firstChild)
        let node = e.parentNode.childNodes[3]
        if (node.type == "password") {
            node.type = "text"
            e.firstChild.classList.replace("fa-eye-slash", "fa-eye")
        } else {
            node.type = "password"
            e.firstChild.classList.replace("fa-eye", "fa-eye-slash")
        }
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>
</html>